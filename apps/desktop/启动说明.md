# Desktop App 启动说明

## 快速启动

### 方法 1: 使用启动脚本（推荐）

```powershell
cd apps\desktop
pnpm start
```

启动脚本会自动查找 Electron，如果找不到会给出提示。

### 方法 2: 如果 Electron 安装失败

#### 选项 A: 使用修复脚本

```powershell
cd apps\desktop
pnpm run fix-electron
pnpm start
```

#### 选项 B: 全局安装 Electron

```powershell
# 全局安装 Electron
npm install -g electron@^32.0.0

# 然后直接运行
cd apps\desktop
electron .
```

#### 选项 C: 手动下载 Electron 二进制文件

1. 访问：https://github.com/electron/electron/releases/tag/v32.3.3
2. 下载 `electron-v32.3.3-win32-x64.zip`
3. 解压到：`D:\01-code\moltbot\node_modules\.pnpm\electron@32.3.3\node_modules\electron\dist\`
4. 确保 `electron.exe` 文件存在
5. 运行 `pnpm start`

#### 选项 D: 使用国内镜像

```powershell
# 设置镜像
$env:ELECTRON_MIRROR="https://npmmirror.com/mirrors/electron/"

# 重新安装
cd apps\desktop
Remove-Item -Recurse -Force "..\..\node_modules\.pnpm\electron@32.3.3" -ErrorAction SilentlyContinue
pnpm install electron@32.3.3 --save-dev --force
pnpm start
```

## 常见问题

### 问题 1: "Electron failed to install correctly"

**原因**: Electron 二进制文件未正确下载

**解决**: 
- 检查网络连接
- 使用修复脚本：`pnpm run fix-electron`
- 或使用全局 Electron：`npm install -g electron@^32.0.0`

### 问题 2: 权限错误 (EPERM)

**原因**: 文件被其他进程占用

**解决**:
1. 关闭所有可能使用 Electron 的进程
2. 以管理员身份运行 PowerShell
3. 重新运行安装命令

### 问题 3: 找不到模块

**原因**: 项目未构建

**解决**:
```powershell
cd D:\01-code\moltbot
pnpm build
```

## 验证安装

检查 Electron 是否可用：

```powershell
# 检查全局安装
electron -v

# 或检查本地安装
cd D:\01-code\moltbot
node node_modules\.pnpm\electron@32.3.3\node_modules\electron\cli.js -v
```

如果显示版本号（如 `v32.3.3`），说明安装成功。
